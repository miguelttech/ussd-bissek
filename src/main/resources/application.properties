# ============================================
# APPLICATION CONFIGURATION
# Author: Thomas Djotio Ndié
# Date: 2025-01-15
# Version: 1.0
# ============================================

# Application Info
spring.application.name=network_projet_ussd
app.name=USSD PickNDrop System
app.version=1.0.0

# ============================================
# SERVER CONFIGURATION
# ============================================
server.port=8080
server.servlet.context-path=/ussd
server.servlet.encoding.charset=UTF-8

# ============================================
# R2DBC POSTGRESQL (Réactif)
# ============================================
spring.r2dbc.url=r2dbc:postgresql://aws-1-eu-central-1.pooler.supabase.com:5432/postgres
spring.r2dbc.username=postgres.rheooaaomujhljjejohz
spring.r2dbc.password=BuZXAA1Rs6qO3VlA
spring.r2dbc.pool.initial-size=5
spring.r2dbc.pool.max-size=20
spring.r2dbc.pool.max-idle-time=30m

# ============================================
# LOGGING
# ============================================
logging.level.root=INFO
logging.level.com.network.projet.ussd=DEBUG
logging.level.io.r2dbc=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ============================================
# SESSION MANAGEMENT
# ============================================
app.session.timeout=600000
app.session.idle-timeout=300000
app.session.cleanup-interval=60000

# ============================================
# USSD CONFIGURATION
# ============================================
ussd.menu.default-timeout=10
ussd.menu.max-retries=3
ussd.response.max-length=160
ussd.service-code=*384*96#

# ============================================
# VALIDATION RULES
# ============================================
validation.email.required=true
validation.phone.required=true
validation.password.min-length=8
validation.password.require-special-chars=true
validation.name.min-length=2
validation.name.max-length=50
validation.phone.min-length=7
validation.phone.max-length=15

# ============================================
# INTERNATIONALIZATION
# ============================================
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.cache-duration=3600

# ============================================
# REDIS CONFIGURATION (Sessions)
# ============================================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=60000
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8

# ============================================
# KAFKA CONFIGURATION
# ============================================
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.consumer.group-id=ussd-consumer-group
spring.kafka.consumer.auto-offset-reset=earliest

# ============================================
# ACTUATOR (Monitoring)
# ============================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# ============================================
# AFRICA'S TALKING CONFIGURATION
# ============================================
africas-talking.api-key=${AFRICAS_TALKING_API_KEY:sandbox}
africas-talking.username=${AFRICAS_TALKING_USERNAME:sandbox}
africas-talking.base-url=https://api.sandbox.africastalking.com/version1
africas-talking.ussd-callback-url=${USSD_CALLBACK_URL:http://localhost:8080/ussd/callback}